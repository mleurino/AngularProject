import{a as A,b as fe,c as _e,e as Ce,f as ge,g as ve,h as he,i as De,j as xe,k as Se,l as Ue,m as be,n as Ee,o as Ie,p as Me,q as Fe,r as Re,s as Te,t as we,u as ye,v as Ae,w as Ne,x as Oe,y as ke}from"./chunk-7QRKQRV6.js";import"./chunk-LURUJP6O.js";import{j as re,l as le,m as u,o as me,p as se,r as ue,s as pe,t as ce,u as de}from"./chunk-YCQZQQQU.js";import{J as N,K as ae}from"./chunk-SOHMW4PZ.js";import{g as y,i as ne,l as G}from"./chunk-JGKZYM5P.js";import"./chunk-5IC5DNT2.js";import{Ab as B,Db as D,Fb as C,Kc as ie,Lc as oe,Pb as n,Rb as d,Ta as l,Ua as m,X,Y as F,Zb as z,_a as te,_b as $,a as x,b as K,f as Q,fa as S,ga as R,ha as T,ia as Y,ib as s,na as ee,nb as U,oa as I,pa as M,q as W,rb as c,ub as o,vb as a,wb as f,xb as v,yb as h,za as w}from"./chunk-KLRYANPK.js";var b=class e{constructor(t,i){this.el=t;this.renderer=i}ngOnInit(){this.renderer.setStyle(this.el.nativeElement,"font-size","20px")}static \u0275fac=function(i){return new(i||e)(m(w),m(te))};static \u0275dir=T({type:e,selectors:[["","appSetFontSize",""]]})};function $e(e,t){e&1&&n(0," Asegurese de ingresar nombre ")}function Ge(e,t){e&1&&n(0," Ingrese al menos 3 caracteres ")}function He(e,t){e&1&&n(0," Asegurese de ingresar apellido ")}function qe(e,t){e&1&&n(0," Ingrese al menos 3 caracteres ")}function Ze(e,t){e&1&&n(0," Ingrese su correo ")}function Je(e,t){e&1&&n(0," Ingrese un correo v\xE1lido ")}var O=class e{constructor(t,i,r){this.matDialofRef=t;this.formBuilder=i;this.data=r;this.userForm=this.formBuilder.group({nombre:[null,[u.required,u.minLength(2),u.maxLength(30),u.pattern("^[a-zA-Z\xC0-\xFF\xF1\xD1 ]+$")]],apellido:[null,[u.required,u.minLength(2),u.maxLength(30),u.pattern("^[a-zA-Z\xC0-\xFF\xF1\xD1 ]+$")]],email:[null,[u.required,u.minLength(5),u.maxLength(30),u.email]]}),this.cambiarDatosFormulario()}userForm;cambiarDatosFormulario(){this.data?.editandoUsuario&&this.userForm.patchValue(this.data.editandoUsuario)}guardar(){this.userForm.invalid?this.userForm.markAllAsTouched:this.matDialofRef.close(K(x({},this.userForm.value),{creadoFecha:new Date,id:this.data?.editandoUsuario?this.data?.editandoUsuario.id:A(5)}))}static \u0275fac=function(i){return new(i||e)(m(ve),m(de),m(he))};static \u0275cmp=S({type:e,selectors:[["app-dialogo-usuarios"]],decls:34,vars:8,consts:[["appSetFontSize","","mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-12"],[1,"example-form-field","w-80"],["formControlName","nombre","matInput","","type","text"],["formControlName","apellido","matInput","","type","text"],["formControlName","email","matInput","","type","email"],["mat-dialog-actions",""],["mat-dialog-close","","mat-button",""],["mat-flat-button","",3,"click"]],template:function(i,r){if(i&1&&(o(0,"h2",0),n(1),a(),o(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),n(8,"Nombre"),a(),f(9,"input",6),o(10,"mat-error"),s(11,$e,1,0)(12,Ge,1,0),a()()(),o(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),n(16,"Apellido"),a(),f(17,"input",7),o(18,"mat-error"),s(19,He,1,0)(20,qe,1,0),a()()(),o(21,"div",4)(22,"mat-form-field",5)(23,"mat-label"),n(24,"Email"),a(),f(25,"input",8),o(26,"mat-error"),s(27,Ze,1,0)(28,Je,1,0),a()()()()()(),o(29,"div",9)(30,"button",10),n(31,"Cancelar"),a(),o(32,"button",11),D("click",function(){return r.guardar()}),n(33,"Guardar"),a()()),i&2){let p,_,H,q,Z,J;l(),d("",r.data!=null&&r.data.editandoUsuario?"Editar":"Agregar"," usuario"),l(2),U("formGroup",r.userForm),l(8),c((p=r.userForm.get("nombre"))!=null&&p.hasError("required")?11:-1),l(),c((_=r.userForm.get("nombre"))!=null&&_.hasError("minlength")?12:-1),l(7),c((H=r.userForm.get("apellido"))!=null&&H.hasError("required")?19:-1),l(),c((q=r.userForm.get("apellido"))!=null&&q.hasError("minlength")?20:-1),l(7),c((Z=r.userForm.get("email"))!=null&&Z.hasError("required")?27:-1),l(),c((J=r.userForm.get("email"))!=null&&J.hasError("email")?28:-1)}},dependencies:[ue,le,me,se,pe,ce,N,Ce,fe,_e,ge,xe,Se,be,Ue,b]})};var Ke=[{id:"1",nombre:"Maximiliano",apellido:"Leurino",contrase\u00F1a:"12345678",email:"mleurino8@gmail.com",creadoFecha:new Date,Aprobado:!0,token:A(20)}],E=class e{constructor(){}obtenerPorId(t){return this.obtenerUsuario().pipe(W(i=>i.find(r=>r.id===t)))}obtenerUsuario(){return new Q(t=>{setInterval(()=>{t.next(Ke),t.complete()},1200)})}static \u0275fac=function(i){return new(i||e)};static \u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"})};var k=class e{constructor(t){this.el=t;this.aplicarEstilos}color="yellow";ngOnChanges(t){console.log("hola"+t)}aplicarEstilos(){this.el.nativeElement.style.backgroundColor=this.color}static \u0275fac=function(i){return new(i||e)(m(w))};static \u0275dir=T({type:e,selectors:[["","appResaltado",""]],inputs:{color:"color"},features:[ee]})};var j=class e{transform(t,...i){return(t.nombre+" "+t.apellido).toUpperCase()}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=Y({name:"nombreCompletoUsuario",type:e,pure:!0})};function Ye(e,t){e&1&&f(0,"mat-spinner",0)}function et(e,t){e&1&&(o(0,"th",16),n(1," No. "),a())}function tt(e,t){if(e&1&&(o(0,"td",17),n(1),a()),e&2){let i=t.index;l(),d(" ",i+1," ")}}function it(e,t){e&1&&(o(0,"th",16),n(1," Nombre completo "),a())}function ot(e,t){if(e&1&&(o(0,"td",18),n(1),z(2,"nombreCompletoUsuario"),a()),e&2){let i=t.$implicit;l(),d(" ",$(2,1,i)," ")}}function nt(e,t){e&1&&(o(0,"th",16),n(1," E-Mail "),a())}function at(e,t){if(e&1&&(o(0,"td",18),n(1),a()),e&2){let i=t.$implicit;l(),d(" ",i.email," ")}}function rt(e,t){e&1&&(o(0,"th",16),n(1," Creado "),a())}function lt(e,t){if(e&1&&(o(0,"td",17),n(1),z(2,"date"),a()),e&2){let i=t.$implicit;l(),d(" ",$(2,1,i.creadoFecha)," ")}}function mt(e,t){e&1&&(o(0,"th",16),n(1," Aprobado "),a())}function st(e,t){if(e&1&&(o(0,"td",17),n(1),a()),e&2){let i=t.$implicit;l(),d(" ",i.aprobado," ")}}function ut(e,t){e&1&&(o(0,"th",16),n(1," Opciones "),a())}function pt(e,t){if(e&1){let i=B();o(0,"td",17)(1,"button",19),D("click",function(){let p=I(i).$implicit,_=C(2);return M(_.irADetalle(p.id))}),o(2,"mat-icon"),n(3,"visibility"),a()(),o(4,"button",19),D("click",function(){let p=I(i).$implicit,_=C(2);return M(_.abrirModal(p))}),o(5,"mat-icon"),n(6,"edit"),a()(),o(7,"button",19),D("click",function(){let p=I(i).$implicit,_=C(2);return M(_.borrarFila(p.id))}),o(8,"mat-icon"),n(9,"delete"),a()()()}}function ct(e,t){e&1&&f(0,"tr",20)}function dt(e,t){e&1&&f(0,"tr",21)}function ft(e,t){if(e&1){let i=B();o(0,"div",1)(1,"h3",2),n(2,"Agregar usuario"),a(),o(3,"button",3),D("click",function(){I(i);let p=C();return M(p.abrirModal())}),o(4,"mat-icon"),n(5," add "),a(),n(6," Agregar "),a(),f(7,"hr"),o(8,"table",4),v(9,5),s(10,et,2,0,"th",6)(11,tt,2,1,"td",7),h(),v(12,8),s(13,it,2,0,"th",6)(14,ot,3,3,"td",9),h(),v(15,10),s(16,nt,2,0,"th",6)(17,at,2,1,"td",9),h(),v(18,11),s(19,rt,2,0,"th",6)(20,lt,3,3,"td",7),h(),v(21,12),s(22,mt,2,0,"th",6)(23,st,2,1,"td",7),h(),v(24,13),s(25,ut,2,0,"th",6)(26,pt,10,0,"td",7),h(),s(27,ct,1,0,"tr",14)(28,dt,1,0,"tr",15),a()()}if(e&2){let i=C();l(8),U("dataSource",i.dataSource),l(19),U("matHeaderRowDef",i.displayedColumns),l(),U("matRowDefColumns",i.displayedColumns)}}var L=class e{constructor(t,i,r,p){this.matDialog=t;this.usersService=i;this.router=r;this.activatedRoute=p}displayedColumns=["ID","Nombre","Email","Creado","Aprobado","Opciones"];dataSource=[];estaCargando=!1;ngOnInit(){this.cargarUsuarios()}irADetalle(t){this.router.navigate([t,"detail"],{relativeTo:this.activatedRoute})}cargarUsuarios(){this.estaCargando=!0,this.usersService.obtenerUsuario().subscribe({next:t=>{this.dataSource=t},error:()=>{this.estaCargando=!1},complete:()=>{this.estaCargando=!1}})}borrarFila(t){console.log(`Borrando usuario con ID: ${t}`),this.dataSource=this.dataSource.filter(i=>i.id!==t)}abrirModal(t){this.matDialog.open(O,{data:{editandoUsuario:t}}).afterClosed().subscribe({next:i=>{i&&(t?this.dataSource=this.dataSource.map(r=>r.id===t.id?x(x({},r),i):r):this.dataSource=[...this.dataSource,x({},i)])}})}static \u0275fac=function(i){return new(i||e)(m(De),m(E),m(ne),m(y))};static \u0275cmp=S({type:e,selectors:[["app-usuarios"]],decls:2,vars:1,consts:[[1,"spinner"],[1,"container"],["appSetFontSize",""],["mat-raised-button","",3,"click"],["mat-table","",1,"mat-elevation-z8","demo-table",3,"dataSource"],["matColumnDef","ID"],["appSetFontSize","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre"],["appResaltado","","mat-cell","",4,"matCellDef"],["matColumnDef","Email"],["matColumnDef","Creado"],["matColumnDef","Aprobado"],["matColumnDef","Opciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["appSetFontSize","","mat-header-cell",""],["mat-cell",""],["appResaltado","","mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&s(0,Ye,1,0,"mat-spinner",0)(1,ft,29,3,"div",1),i&2&&c(r.estaCargando?0:1)},dependencies:[N,ae,re,Ee,Me,we,Fe,Ie,ye,Re,Te,Ae,Ne,k,b,Oe,ie,j],styles:[".spinner[_ngcontent-%COMP%]{position:relative;left:50%;top:20%}"]})};function _t(e,t){e&1&&(o(0,"p"),n(1,"Cargando, por favor espere..."),a())}function Ct(e,t){if(e&1&&(o(0,"h1"),n(1),a()),e&2){let i=C();l(),d("Detalle del usuario: ",(i.usuario==null?null:i.usuario.nombre)+" "+(i.usuario==null?null:i.usuario.apellido),"")}}var V=class e{constructor(t,i){this.activatedRoute=t;this.usersService=i;this.idUsuario=t.snapshot.params.id}idUsuario;usuario;isLoading=!1;ngOnInit(){this.isLoading=!0,this.usersService.obtenerPorId(this.activatedRoute.snapshot.params.id).subscribe({next:t=>{this.usuario=t,this.isLoading=!1}})}static \u0275fac=function(i){return new(i||e)(m(y),m(E))};static \u0275cmp=S({type:e,selectors:[["app-detalleusuario"]],decls:2,vars:1,template:function(i,r){i&1&&s(0,_t,2,0,"p")(1,Ct,2,1,"h1"),i&2&&c(r.isLoading?0:1)}})};var gt=[{path:"",component:L},{path:":id/detail",component:V}],P=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=R({type:e});static \u0275inj=F({imports:[G.forChild(gt),G]})};var Pe=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=R({type:e});static \u0275inj=F({imports:[oe,P,ke]})};export{Pe as UsuariosModule};
